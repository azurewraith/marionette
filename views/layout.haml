!!! 5
%html
  %head
    <link rel="apple-touch-startup-image" href="./images/splash.png" />
    %meta{:name => "apple-mobile-web-app-capable", :content => "yes"}
    %meta{:name => "viewport", :content => "user-scalable=no, width=device-width"}
    %meta{:name => "apple-mobile-web-app-status-bar-style", :content=>"black"}
    %link{:rel => "apple-touch-icon", :href=>"./images/apple-touch-icon.png"}
    %link{:rel => "stylesheet", :href => "./game.css", :type => "text/css", :media => "screen"}
    %script{:src => "http://code.jquery.com/jquery-1.7.2.min.js"}
    %link{}
    :javascript
      function BlockMove(event) {
        // Tell Safari not to move the window.
        event.preventDefault() ;
      }

      jQuery(window).ready(function(){  
            jQuery("#btnInit").click(initiate_geolocation);  
        });  
  
        function initiate_geolocation() {  
            navigator.geolocation.getCurrentPosition(handle_geolocation_query, handle_errors);  
        }

        function handle_errors(error)  
        {  
            switch(error.code)  
            {  
                case error.PERMISSION_DENIED: alert("user did not share geolocation data");  
                break;  
  
                case error.POSITION_UNAVAILABLE: alert("could not detect current position");  
                break;  
  
                case error.TIMEOUT: alert("retrieving position timed out");  
                break;  
  
                default: alert("unknown error");  
                break;  
            }  
        }  
  
        function handle_geolocation_query(position){  
            alert('Lat: ' + position.coords.latitude + ' ' +  
                  'Lon: ' + position.coords.longitude);  
        }  
    %title Space Battle!
  %body(ontouchmove="BlockMove(event);")
    =yield